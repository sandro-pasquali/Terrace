(function(a){a.extend(true,window,{Slick:{CheckboxSelectColumn:b}});function b(r){var i;var h=this;var m=new Slick.EventHandler();var q={};var f={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30};var o=a.extend(true,{},f,r);function p(s){i=s;m.subscribe(i.onSelectedRowsChanged,j).subscribe(i.onClick,g).subscribe(i.onHeaderClick,n).subscribe(i.onKeyDown,c)}function k(){m.unsubscribeAll()}function j(w,s){var v=i.getSelectedRows();var u={},x,t;for(t=0;t<v.length;t++){x=v[t];u[x]=true;if(u[x]!==q[x]){i.invalidateRow(x);delete q[x]}}for(t in q){i.invalidateRow(t)}q=u;i.render();if(v.length&&v.length==i.getDataLength()){i.updateColumnHeader(o.columnId,"<input type='checkbox' checked='checked'>",o.toolTip)}else{i.updateColumnHeader(o.columnId,"<input type='checkbox'>",o.toolTip)}}function c(t,s){if(t.which==32){if(i.getColumns()[s.cell].id===o.columnId){if(!i.getEditorLock().isActive()||i.getEditorLock().commitCurrentEdit()){l(s.row)}t.preventDefault();t.stopImmediatePropagation()}}}function g(t,s){if(i.getColumns()[s.cell].id===o.columnId&&a(t.target).is(":checkbox")){if(i.getEditorLock().isActive()&&!i.getEditorLock().commitCurrentEdit()){t.preventDefault();t.stopImmediatePropagation();return}l(s.row);t.stopPropagation();t.stopImmediatePropagation()}}function l(s){if(q[s]){i.setSelectedRows(a.grep(i.getSelectedRows(),function(t){return t!=s}))}else{i.setSelectedRows(i.getSelectedRows().concat(s))}}function n(v,s){if(s.column.id==o.columnId&&a(v.target).is(":checkbox")){if(i.getEditorLock().isActive()&&!i.getEditorLock().commitCurrentEdit()){v.preventDefault();v.stopImmediatePropagation();return}if(a(v.target).is(":checked")){var u=[];for(var t=0;t<i.getDataLength();t++){u.push(t)}i.setSelectedRows(u)}else{i.setSelectedRows([])}v.stopPropagation();v.stopImmediatePropagation()}}function d(){return{id:o.columnId,name:"<input type='checkbox'>",toolTip:o.toolTip,field:"sel",width:o.width,resizable:false,sortable:false,cssClass:o.cssClass,formatter:e}}function e(w,t,v,u,s){if(s){return q[w]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>"}return null}a.extend(this,{init:p,destroy:k,getColumnDefinition:d})}})(jQuery);